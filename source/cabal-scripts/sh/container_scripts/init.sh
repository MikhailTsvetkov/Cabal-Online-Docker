#!/bin/bash

chmod 0700 /etc/cabal_scripts/gms_proxy/proxy.py
chmod 0700 /etc/cabal_scripts/services_checker.sh
chmod 0700 /etc/cabal_scripts/status.sh
chmod 0700 /etc/cabal_scripts/autorun.sh

chmod 0700 /etc/cabal_bin/AgentShop
chmod 0700 /etc/cabal_bin/AuthDBAgent
chmod 0700 /etc/cabal_bin/ChatNode
chmod 0700 /etc/cabal_bin/DBAgent
chmod 0700 /etc/cabal_bin/EventMgrSvr
chmod 0700 /etc/cabal_bin/GlobalMgrSvr
chmod 0700 /etc/cabal_bin/LoginSvr
chmod 0700 /etc/cabal_bin/PartySvr
chmod 0700 /etc/cabal_bin/RockAndRollITS
chmod 0700 /etc/cabal_bin/WorldSvr

ln -sf /etc/cabal_bin/AgentShop /usr/bin/AgentShop_01
ln -sf /etc/cabal_bin/AuthDBAgent /usr/bin/AuthDBAgent
ln -sf /etc/cabal_bin/ChatNode /usr/bin/ChatNode_01
ln -sf /etc/cabal_bin/DBAgent /usr/bin/DBAgent_01
ln -sf /etc/cabal_bin/DBAgent /usr/bin/CashDBAgent_01
ln -sf /etc/cabal_bin/DBAgent /usr/bin/GlobalDBAgent
ln -sf /etc/cabal_bin/DBAgent /usr/bin/EventDBAgent
ln -sf /etc/cabal_bin/DBAgent /usr/bin/PCBangDBAgent
ln -sf /etc/cabal_bin/EventMgrSvr /usr/bin/EventMgrSvr
ln -sf /etc/cabal_bin/GlobalMgrSvr /usr/bin/GlobalMgrSvr
ln -sf /etc/cabal_bin/LoginSvr /usr/bin/LoginSvr_01
ln -sf /etc/cabal_bin/PartySvr /usr/bin/PartySvr_01
ln -sf /etc/cabal_bin/RockAndRollITS /usr/bin/RockAndRollITS

ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_01
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_02
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_03
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_04
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_05
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_06
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_07
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_08
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_09
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_10
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_11
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_12
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_13
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_14
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_15
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_16
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_17
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_18
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_19
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_01_20

# Add. services
ln -sf /etc/cabal_bin/AgentShop /usr/bin/AgentShop_02
ln -sf /etc/cabal_bin/ChatNode /usr/bin/ChatNode_02
ln -sf /etc/cabal_bin/DBAgent /usr/bin/DBAgent_02
ln -sf /etc/cabal_bin/DBAgent /usr/bin/CashDBAgent_02
ln -sf /etc/cabal_bin/PartySvr /usr/bin/PartySvr_02
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_01
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_02
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_03
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_04
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_05
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_06
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_07
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_08
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_09
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_10
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_11
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_12
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_13
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_14
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_15
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_16
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_17
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_18
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_19
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_02_20

ln -sf /etc/cabal_bin/AgentShop /usr/bin/AgentShop_03
ln -sf /etc/cabal_bin/ChatNode /usr/bin/ChatNode_03
ln -sf /etc/cabal_bin/DBAgent /usr/bin/DBAgent_03
ln -sf /etc/cabal_bin/DBAgent /usr/bin/CashDBAgent_03
ln -sf /etc/cabal_bin/PartySvr /usr/bin/PartySvr_03
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_01
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_02
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_03
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_04
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_05
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_06
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_07
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_08
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_09
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_10
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_11
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_12
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_13
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_14
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_15
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_16
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_17
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_18
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_19
ln -sf /etc/cabal_bin/WorldSvr /usr/bin/WorldSvr_03_20

ln -sf /etc/cabal_bin/DBAgent /usr/bin/EventDBAgent_01
ln -sf /etc/cabal_bin/DBAgent /usr/bin/EventDBAgent_02
ln -sf /etc/cabal_bin/DBAgent /usr/bin/EventDBAgent_03
ln -sf /etc/cabal_bin/EventMgrSvr /usr/bin/EventMgrSvr_01
ln -sf /etc/cabal_bin/EventMgrSvr /usr/bin/EventMgrSvr_02
ln -sf /etc/cabal_bin/EventMgrSvr /usr/bin/EventMgrSvr_03



#odbc.ini - deprecated
#sed -i -e "s/^Address.*/Address     = $MSSQL_HOST/g" /etc/odbc.ini
#sed -i -e "s/^Port.*/Port        = $MSSQL_PORT/g" /etc/odbc.ini

#AgentShop
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/AgentShop*

#AuthDBAgent
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/AuthDBAgent*
sed -i -e "s/^DBId=.*/DBId=$MSSQL_USER/g" /etc/cabal/AuthDBAgent*
sed -i -e "s/^DBPwd=.*/DBPwd=$MSSQL_PASS/g" /etc/cabal/AuthDBAgent*
	
#CashDBAgent
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/CashDBAgent*
sed -i -e "s/^DBId=.*/DBId=$MSSQL_USER/g" /etc/cabal/CashDBAgent*
sed -i -e "s/^DBPwd=.*/DBPwd=$MSSQL_PASS/g" /etc/cabal/CashDBAgent*
	
#ChatNode
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/ChatNode*

#DBAgent
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/DBAgent*
sed -i -e "s/^DBId=.*/DBId=$MSSQL_USER/g" /etc/cabal/DBAgent*
sed -i -e "s/^DBPwd=.*/DBPwd=$MSSQL_PASS/g" /etc/cabal/DBAgent*
	
#EventDBAgent
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/EventDBAgent*
sed -i -e "s/^DBId=.*/DBId=$MSSQL_USER/g" /etc/cabal/EventDBAgent*
sed -i -e "s/^DBPwd=.*/DBPwd=$MSSQL_PASS/g" /etc/cabal/EventDBAgent*
	
#EventMgrSvr
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/EventMgrSvr*

#GlobalDBAgent
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/GlobalDBAgent*
sed -i -e "s/^DBId=.*/DBId=$MSSQL_USER/g" /etc/cabal/GlobalDBAgent*
sed -i -e "s/^DBPwd=.*/DBPwd=$MSSQL_PASS/g" /etc/cabal/GlobalDBAgent*
	
#GlobalMgrSvr
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/GlobalMgrSvr*

#LoginSvr
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/LoginSvr*
sed -i -e "s/^ImageAuthDataPath=.*/ImageAuthDataPath=\/etc\/cabal_etc\/ImageAuth_Login\//g" /etc/cabal/LoginSvr*

#PartySvr
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/PartySvr*
	
#PCBangDBAgent
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/PCBangDBAgent*
sed -i -e "s/^DBId=.*/DBId=$MSSQL_USER/g" /etc/cabal/PCBangDBAgent*
sed -i -e "s/^DBPwd=.*/DBPwd=$MSSQL_PASS/g" /etc/cabal/PCBangDBAgent*
	
#RockAndRollITS
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/RockAndRollITS*
sed -i -e "s/ESymRepositoryPath=.*/ESymRepositoryPath=\/etc\/cabal_etc\/GMSHeartITS\//g" /etc/cabal/RockAndRollITS*

#WorldSvr
sed -i -e "s/MemCoreDumperPath=.*/MemCoreDumperPath=\/etc\/cabal_etc\/core/g" /etc/cabal/WorldSvr*
sed -i -e "s/IPAddress=.*/IPAddress=$CABAL_HOST/g" /etc/cabal/WorldSvr*
sed -i -e "s/ImageAuthDataPath=.*/ImageAuthDataPath=\/etc\/cabal_etc\/ImageAuth\//g" /etc/cabal/WorldSvr*
